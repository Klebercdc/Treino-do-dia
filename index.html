<!doctype html>
<html lang="pt-PT">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
    <meta name="theme-color" content="#0b1220" />
    <title>TITAN LOG ELITE</title>
    <style>
      :root { --bg: #0b1220; --card: #161e2e; --blue: #3182ce; --text: #f7fafc; --orange: #f6ad55; --green: #38b2ac; --red: #e53e3e; }
      body { background: var(--bg); color: var(--text); font-family: 'Inter', -apple-system, sans-serif; margin: 0; padding-bottom: 100px; -webkit-font-smoothing: antialiased; }
      
      /* Header & UI Elements */
      .top-header { padding: 20px 15px; background: rgba(22, 30, 46, 0.95); backdrop-filter: blur(10px); border-bottom: 1px solid #2d3748; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; }
      .brand { font-weight: 900; font-size: 1.2rem; letter-spacing: -1px; color: var(--blue); }
      .timer-display { font-family: monospace; color: var(--orange); font-weight: bold; font-size: 1.1rem; }

      .nav-pills { display: flex; gap: 10px; padding: 15px; background: var(--bg); overflow-x: auto; }
      .pill { flex: 1; text-align: center; padding: 12px; border-radius: 10px; background: #1a202c; font-weight: 800; font-size: 0.7rem; border: 1px solid #2d3748; cursor: pointer; color: #718096; transition: 0.3s; text-transform: uppercase; }
      .pill.active { background: var(--blue); border-color: var(--blue); color: white; box-shadow: 0 4px 15px rgba(49, 130, 206, 0.3); }

      /* Exercise Cards */
      .exercise-card { background: var(--card); border-radius: 16px; padding: 18px; margin: 12px; border: 1px solid #2d3748; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
      .ex-title { font-weight: 800; font-size: 1.1rem; color: #fff; margin-bottom: 4px; display: block; border-left: 4px solid var(--blue); padding-left: 10px; }
      .ex-target { font-size: 0.75rem; color: var(--orange); font-weight: bold; margin-bottom: 15px; display: block; padding-left: 14px; }
      
      .series-row { display: grid; grid-template-columns: 40px 1fr 1fr 1fr; gap: 10px; align-items: center; margin-bottom: 10px; padding: 5px; border-radius: 8px; transition: 0.2s; }
      .series-row.filled { background: rgba(56, 178, 172, 0.05); border: 1px solid rgba(56, 178, 172, 0.2); }
      
      .input-box { background: #0b1220; border: 1px solid #2d3748; border-radius: 8px; padding: 10px 0; }
      .input-box input { background: transparent; border: none; color: #fff; width: 100%; text-align: center; font-size: 1.1rem; outline: none; font-weight: bold; }
      .input-box input::placeholder { color: #2d3748; }

      /* Footer & Buttons */
      .footer { position: fixed; bottom: 0; width: 100%; background: rgba(11, 18, 32, 0.9); backdrop-filter: blur(15px); padding: 15px; box-sizing: border-box; display: flex; gap: 12px; border-top: 1px solid #2d3748; }
      .btn { padding: 16px; border-radius: 12px; border: none; font-weight: 800; cursor: pointer; flex: 1; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 1px; }
      .btn-save { background: var(--green); color: white; box-shadow: 0 4px 15px rgba(56, 178, 172, 0.3); }
      .btn-util { background: #2d3748; color: white; flex: 0.4; }

      dialog { background: #161e2e; color: #fff; border: 1px solid var(--blue); border-radius: 20px; width: 90%; max-width: 450px; padding: 25px; border: none; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5); }
      .section { display: none; }
      .section.active { display: block; }
    </style>
  </head>
  <body>

    <header class="top-header">
      <div class="brand">TITAN<span style="color:#fff">LOG</span></div>
      <div id="timer" class="timer-display" onclick="startTimer(60)">REST: 00s</div>
      <div id="date" style="font-size:0.7rem; font-weight:bold; color:var(--blue)">03/01/26</div>
    </header>

    <div class="nav-pills" id="nav"></div>
    <main id="container"></main>

    <footer class="footer">
      <button class="btn btn-util" onclick="startTimer(90)">‚è±Ô∏è 90s</button>
      <button class="btn btn-save" onclick="salvarTreino()">SALVAR TREINO</button>
      <button class="btn btn-util" onclick="verHistorico()">üìú</button>
    </footer>

    <dialog id="modalHist">
      <h2 style="margin-top:0; color:var(--blue)">Hist√≥rico</h2>
      <div id="histContent" style="max-height:400px; overflow-y:auto; font-size:0.85rem"></div>
      <button class="btn btn-util" onclick="document.getElementById('modalHist').close()" style="width:100%; margin-top:15px">Fechar</button>
      <button onclick="exportarDados()" style="background:none; border:none; color:var(--orange); width:100%; margin-top:10px; font-size:0.7rem">EXPORTAR BACKUP (TEXTO)</button>
    </dialog>

    <script>
      const baseABC = {
        "A": { nome: "PUSH (Peito/Ombro/Tr√≠)", ex: ["Supino Inclinado", "Supino Reto Halter", "Desenvolvimento Militar", "Eleva√ß√£o Lateral", "Tr√≠ceps Corda", "Tr√≠ceps Testa"] },
        "B": { nome: "PULL (Costas/Biceps)", ex: ["Puxada Alta", "Remada Curvada", "Remada Serrote", "Crucifixo Inverso", "Rosca Direta", "Rosca Martelo"] },
        "C": { nome: "LEGS (Pernas)", ex: ["Leg Press 45", "Cadeira Extensora", "Cadeira Flexora", "Stiff", "Panturrilha em P√©"] }
      };

      function startTimer(seconds) {
        let time = seconds;
        const display = document.getElementById('timer');
        clearInterval(window.timerInterval);
        window.timerInterval = setInterval(() => {
          display.innerText = `REST: ${time}s`;
          if (time <= 0) {
            clearInterval(window.timerInterval);
            display.innerText = "REST: FIM!";
            if(window.navigator.vibrate) window.navigator.vibrate([200, 100, 200]);
          }
          time--;
        }, 1000);
      }

      function build() {
        const nav = document.getElementById('nav');
        const cont = document.getElementById('container');
        Object.keys(baseABC).forEach((letra, i) => {
          nav.innerHTML += `<div class="pill ${i===0?'active':''}" id="p${letra}" onclick="tab('${letra}')">${baseABC[letra].nome}</div>`;
          let sec = document.createElement('div');
          sec.id = `sec${letra}`;
          sec.className = `section ${i===0?'active':''}`;
          
          baseABC[letra].ex.forEach(ex => {
            sec.innerHTML += `
              <div class="exercise-card">
                <span class="ex-title">${ex}</span>
                <span class="ex-target">META: 4 SETS | 8-12 REPS | RPE 9</span>
                <div class="series-row" style="text-align:center; font-size:0.6rem; color:var(--blue); font-weight:bold"><span>SET</span><span>KG</span><span>REPS</span><span>RPE</span></div>
                ${Array.from({length: 4}, (_, s) => `
                  <div class="series-row" id="row-${letra}-${ex}-${s}">
                    <span style="text-align:center; font-weight:bold; color:#718096">S${s+1}</span>
                    <div class="input-box"><input type="number" inputmode="decimal" oninput="markRow(this)"></div>
                    <div class="input-box"><input type="number" inputmode="numeric" oninput="markRow(this)"></div>
                    <div class="input-box"><input type="number" inputmode="numeric" oninput="markRow(this)" placeholder="1-10"></div>
                  </div>`).join('')}
              </div>`;
          });
          cont.appendChild(sec);
        });
      }

      function markRow(el) {
        const row = el.closest('.series-row');
        row.classList.add('filled');
      }

      function tab(l) {
        document.querySelectorAll('.section, .pill').forEach(el => el.classList.remove('active'));
        document.getElementById(`sec${l}`).classList.add('active');
        document.getElementById(`p${l}`).classList.add('active');
      }

      function salvarTreino() {
        const ativo = document.querySelector('.section.active');
        const logs = [];
        ativo.querySelectorAll('.exercise-card').forEach(card => {
          const nome = card.querySelector('.ex-title').innerText;
          card.querySelectorAll('.series-row:not([style*="text-align"])').forEach((linha, i) => {
            const inps = linha.querySelectorAll('input');
            if(inps[1].value) logs.push({ex: nome, s: i+1, kg: inps[0].value||0, r: inps[1].value, rpe: inps[2].value||'-'});
          });
        });
        if(!logs.length) return alert("Insira as repeti√ß√µes!");
        let h = JSON.parse(localStorage.getItem('titan_elite_v1') || '[]');
        h.unshift({data: new Date().toLocaleString('pt-BR'), logs});
        localStorage.setItem('titan_elite_v1', JSON.stringify(h.slice(0,50)));
        alert("‚úÖ TREINO REGISTADO!");
      }

      function verHistorico() {
        const h = JSON.parse(localStorage.getItem('titan_elite_v1') || '[]');
        document.getElementById('histContent').innerHTML = h.map(i => `
          <div style="border-bottom:1px solid #2d3748; padding:12px 0">
            <b style="color:var(--orange)">${i.data}</b><br>
            ${i.logs.map(l => `<span style="font-size:0.75rem">${l.ex} S${l.s}: ${l.kg}kg x ${l.r} (RPE:${l.rpe})</span><br>`).join('')}
          </div>`).join('') || "Sem dados.";
        document.getElementById('modalHist').showModal();
      }

      function exportarDados() {
        const h = localStorage.getItem('titan_elite_v1');
        prompt("Copie seu backup de dados abaixo:", h);
      }

      window.onload = () => {
        build();
        document.getElementById('date').innerText = new Date().toLocaleDateString('pt-BR');
      };
    </script>
  </body>
</html>
