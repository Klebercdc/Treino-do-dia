<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
    <meta name="theme-color" content="#0b1220" />
    <title>TITAN AI - Consultoria Inteligente</title>
    <style>
      :root { --bg: #0b1220; --card: #161e2e; --blue: #3182ce; --text: #f7fafc; --orange: #f6ad55; --green: #38b2ac; }
      body { background: var(--bg); color: var(--text); font-family: -apple-system, sans-serif; margin: 0; padding-bottom: 80px; }
      
      /* Setup Panel */
      .setup-panel { background: var(--card); padding: 20px; border-bottom: 2px solid var(--blue); }
      .setup-panel h2 { margin: 0 0 15px 0; font-size: 1.2rem; color: var(--blue); text-align: center; }
      .field { margin-bottom: 15px; }
      .field label { font-size: 0.75rem; color: #a0aec0; display: block; margin-bottom: 5px; font-weight: bold; }
      .field select { width: 100%; padding: 12px; background: #0b1220; color: white; border: 1px solid #2d3748; border-radius: 8px; font-size: 0.9rem; outline: none; }
      
      /* Navigation */
      .nav-pills { display: flex; gap: 8px; padding: 10px; background: var(--bg); position: sticky; top: 0; z-index: 10; overflow-x: auto; white-space: nowrap; }
      .pill { flex: 1; text-align: center; padding: 12px 20px; border-radius: 8px; background: #1a202c; font-weight: bold; font-size: 0.75rem; border: 1px solid #2d3748; cursor: pointer; color: #a0aec0; }
      .pill.active { background: var(--blue); border-color: var(--blue); color: white; }

      /* Exercise Cards */
      .exercise-card { background: var(--card); border-radius: 12px; padding: 15px; margin: 10px; border: 1px solid #2d3748; }
      .ex-header { margin-bottom: 12px; }
      .ex-title { font-weight: 800; font-size: 1.1rem; color: var(--blue); display: block; }
      .ex-target { font-size: 0.8rem; color: var(--orange); font-weight: bold; margin-top: 4px; display: block; }
      
      .series-grid { display: grid; grid-template-columns: 40px 1fr 1fr 1fr; gap: 8px; align-items: center; margin-bottom: 8px; }
      .header-grid { text-align: center; font-size: 0.6rem; color: #718096; font-weight: bold; margin-bottom: 5px; }
      .input-box { background: #0b1220; border: 1px solid #2d3748; border-radius: 6px; padding: 8px 0; }
      .input-box input { background: transparent; border: none; color: #fff; width: 100%; text-align: center; font-size: 1.1rem; outline: none; font-weight: bold; }
      
      .section { display: none; }
      .section.active { display: block; }

      /* Footer */
      .footer { position: fixed; bottom: 0; width: 100%; background: var(--bg); padding: 10px; box-sizing: border-box; display: flex; gap: 10px; border-top: 1px solid #2d3748; }
      .btn { padding: 15px; border-radius: 8px; border: none; font-weight: bold; cursor: pointer; flex: 1; text-align: center; }
      .btn-save { background: var(--green); color: white; }
      .btn-hist { background: var(--card); color: white; border: 1px solid var(--blue); }
    </style>
  </head>
  <body>

    <div class="setup-panel" id="setupPanel">
      <h2>CONFIGURAR PROTOCOLO</h2>
      
      <div class="field">
        <label>DISPONIBILIDADE (DIAS POR SEMANA)</label>
        <select id="freq" onchange="gerarProtocolo()">
          <option value="2">2 Dias (Full Body)</option>
          <option value="3">3 Dias (FB ou ABC)</option>
          <option value="4" selected>4 Dias (Upper / Lower)</option>
          <option value="5">5 Dias (Push / Pull / Legs + UL)</option>
          <option value="6">6 Dias (PPL 2x)</option>
        </select>
      </div>

      <div class="field">
        <label>OBJETIVO PRINCIPAL</label>
        <select id="obj" onchange="gerarProtocolo()">
          <option value="hipertrofia">Hipertrofia (Ganho de Massa)</option>
          <option value="forca">For√ßa Bruta (Cargas Altas)</option>
          <option value="cutting">Defini√ß√£o (Gasto Cal√≥rico)</option>
        </select>
      </div>

      <button class="btn btn-save" onclick="document.getElementById('setupPanel').style.display='none'">MONTAR TREINO AGORA</button>
    </div>

    <div class="nav-pills" id="nav"></div>
    <main id="container"></main>

    <footer class="footer">
      <button class="btn btn-hist" onclick="verHistorico()">üìú HIST√ìRICO</button>
      <button class="btn btn-save" onclick="salvarTreino()">üíæ SALVAR HOJE</button>
      <button class="btn btn-hist" onclick="document.getElementById('setupPanel').style.display='block'" style="flex:0.5">‚öôÔ∏è</button>
    </footer>

    <script>
      const db = {
        peito: ["Supino Inclinado", "Supino Reto", "Crucifixo"],
        costas: ["Puxada Alta", "Remada Curvada", "Remada Baixa"],
        ombro: ["Desenvolvimento", "Eleva√ß√£o Lateral", "Face Pull"],
        perna: ["Agachamento", "Leg Press", "Cadeira Extensora", "Mesa Flexora"],
        bra√ßo: ["Rosca Direta", "Tr√≠ceps Corda", "Tr√≠ceps Testa"]
      };

      function gerarProtocolo() {
        const f = document.getElementById('freq').value;
        const o = document.getElementById('obj').value;
        const nav = document.getElementById('nav');
        const cont = document.getElementById('container');
        
        nav.innerHTML = ""; cont.innerHTML = "";

        let divisao = [];
        if(f == "2") divisao = ["TREINO √öNICO (Full Body)"];
        else if(f == "3") divisao = ["A (Empurrar)", "B (Puxar)", "C (Pernas)"];
        else if(f == "4") divisao = ["A (Superior)", "B (Inferior)", "C (Superior)", "D (Inferior)"];
        else divisao = ["A (Peito/Ombro)", "B (Costas/Trapezio)", "C (Pernas)", "D (Bra√ßos)"];

        let reps = o === "forca" ? "5-8" : (o === "hipertrofia" ? "8-12" : "12-15");
        let series = o === "forca" ? 5 : 4;

        divisao.forEach((nome, i) => {
          nav.innerHTML += `<div class="pill ${i===0?'active':''}" id="p${i}" onclick="tab(${i})">${nome}</div>`;
          let sec = document.createElement('div');
          sec.id = `sec${i}`;
          sec.className = `section ${i===0?'active':''}`;
          
          // Sele√ß√£o l√≥gica de exerc√≠cios simplificada para o exemplo
          const lista = [...db.peito, ...db.costas, ...db.perna].slice(i*2, (i*2)+5);
          
          lista.forEach(ex => {
            sec.innerHTML += `
              <div class="exercise-card">
                <div class="ex-header">
                  <span class="ex-title">${ex}</span>
                  <span class="ex-target">META: ${series}x ${reps} | RPE 9</span>
                </div>
                <div class="series-grid header-grid"><span>SET</span><span>KG</span><span>REPS</span><span>RPE</span></div>
                ${Array.from({length: series}, (_, s) => `
                  <div class="series-grid">
                    <span style="text-align:center; font-weight:bold; color:#718096">S${s+1}</span>
                    <div class="input-box"><input type="number" inputmode="decimal" placeholder="-"></div>
                    <div class="input-box"><input type="number" inputmode="numeric" placeholder="-"></div>
                    <div class="input-box"><input type="number" inputmode="numeric" placeholder="-"></div>
                  </div>
                `).join('')}
              </div>`;
          });
          cont.appendChild(sec);
        });
      }

      function tab(idx) {
        document.querySelectorAll('.section, .pill').forEach(el => el.classList.remove('active'));
        document.getElementById(`sec${idx}`).classList.add('active');
        document.getElementById(`p${idx}`).classList.add('active');
      }

      function salvarTreino() {
        const ativo = document.querySelector('.section.active');
        const logs = [];
        ativo.querySelectorAll('.exercise-card').forEach(card => {
          const nome = card.querySelector('.ex-title').innerText;
          card.querySelectorAll('.series-grid:not(.header-grid)').forEach((linha, i) => {
            const inps = linha.querySelectorAll('input');
            if(inps[1].value) logs.push({ex: nome, s: i+1, kg: inps[0].value||0, r: inps[1].value});
          });
        });
        if(!logs.length) return alert("Preencha as repeti√ß√µes!");
        let h = JSON.parse(localStorage.getItem('titan_universal') || '[]');
        h.unshift({data: new Date().toLocaleString(), dados: logs});
        localStorage.setItem('titan_universal', JSON.stringify(h.slice(0,20)));
        alert("‚úÖ Salvo no dispositivo!");
      }

      function verHistorico() {
        let h = JSON.parse(localStorage.getItem('titan_universal') || '[]');
        if(!h.length) return alert("Nenhum hist√≥rico encontrado.");
        let txt = h.map(i => `${i.data}\n${i.dados.map(d => `${d.ex} (S${d.s}): ${d.kg}kg x ${d.r}`).join('\n')}`).join('\n\n---\n\n');
        alert(txt);
      }

      window.onload = gerarProtocolo;
    </script>
  </body>
</html>
