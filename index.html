<!doctype html>
<html lang="pt-PT">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
    <meta name="theme-color" content="#3b5bdb" />
    <title>TITAN LOG - FINAL HYBRID</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      :root { --primary: #3b5bdb; --bg: #f8f9fa; --card: #ffffff; --text: #1a1a1a; --gray: #868e96; --green: #40c057; --orange: #fd7e14; }
      body { background: var(--bg); color: var(--text); font-family: -apple-system, sans-serif; margin: 0; padding-bottom: 90px; }
      
      /* Navigation */
      .tab-nav { display: flex; position: fixed; bottom: 0; width: 100%; background: var(--card); border-top: 1px solid #eee; padding: 12px 0; justify-content: space-around; z-index: 1000; }
      .tab-item { text-align: center; color: var(--gray); font-size: 11px; cursor: pointer; flex: 1; }
      .tab-item.active { color: var(--primary); font-weight: 700; }

      /* Sections */
      .section { display: none; padding: 20px; }
      .section.active { display: block; }

      /* Cards & UI */
      .header { padding: 20px 0; display: flex; justify-content: space-between; align-items: center; }
      .card { background: var(--card); border-radius: 16px; padding: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); margin-bottom: 20px; }
      .summary-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 20px; }
      .summary-box { background: var(--card); padding: 12px; border-radius: 12px; border: 1px solid #eee; }
      .summary-box span { font-size: 10px; color: var(--gray); display: block; }
      .summary-box strong { font-size: 16px; color: var(--primary); }

      /* Exercise Row */
      .series-row { display: grid; grid-template-columns: 30px 1fr 1fr 1fr; gap: 8px; align-items: center; margin-bottom: 10px; }
      .input-group { background: #f1f3f5; border-radius: 8px; padding: 6px; text-align: center; }
      .input-group span { font-size: 8px; color: var(--gray); display: block; }
      input { background: transparent; border: none; width: 100%; text-align: center; font-size: 15px; font-weight: 700; outline: none; }
      
      .predict-badge { background: rgba(64, 192, 87, 0.1); color: var(--green); padding: 10px; border-radius: 8px; font-size: 11px; font-weight: 700; margin-bottom: 15px; display: none; text-align: center; }
      .btn-main { background: var(--primary); color: white; border: none; padding: 16px; border-radius: 12px; font-size: 15px; font-weight: 700; width: 100%; cursor: pointer; }

      .ex-title { font-weight: 800; font-size: 17px; margin-bottom: 15px; display: block; }
    </style>
  </head>
  <body>

    <div id="relatorio" class="section active">
      <div class="header"><h2>üìä Estat√≠sticas</h2></div>
      <div class="summary-grid">
        <div class="summary-box"><span>Treinos</span><strong>12</strong></div>
        <div class="summary-box"><span>Volume</span><strong>5.4k</strong></div>
        <div class="summary-box"><span>Peso</span><strong>67kg</strong></div>
      </div>
      <div class="card"><canvas id="mainChart" height="150"></canvas></div>
    </div>

    <div id="treino" class="section">
      <div class="header"><h2>üèãÔ∏è Treino de Hoje</h2><span id="faseAtiva" style="color:var(--orange); font-weight:bold; font-size:12px;">HIPERTROFIA</span></div>
      
      <div id="predict-box" class="predict-badge"></div>

      <div id="workout-container">
          </div>
      <button class="btn-main" onclick="salvarSessao()">FINALIZAR TREINO</button>
    </div>

    <div id="personalizar" class="section">
      <div class="header"><h2>‚öôÔ∏è Ajustes</h2></div>
      <div class="card">
        <label style="font-size:12px; font-weight:bold; color:var(--gray)">FASE DA PERIODIZA√á√ÉO</label>
        <select id="selectFase" onchange="mudarFase()" style="width:100%; padding:15px; margin-top:10px; border-radius:10px; border:1px solid #ddd; font-weight:bold;">
            <option value="adapt">Fase 1: Adapta√ß√£o</option>
            <option value="hiper" selected>Fase 2: Hipertrofia</option>
            <option value="forca">Fase 3: For√ßa Pura</option>
            <option value="cut">Fase 4: Polimento</option>
        </select>
      </div>
    </div>

    <nav class="tab-nav">
      <div class="tab-item" onclick="nav('relatorio')">üìä Relat√≥rio</div>
      <div class="tab-item active" onclick="nav('treino')">üèãÔ∏è Treino</div>
      <div class="tab-item" onclick="nav('personalizar')">‚öôÔ∏è Ajustes</div>
    </nav>

    <script>
      const treinosABC = {
        "A": ["Agachamento Smith", "Supino Inclinado", "Desenv. Militar", "Fundos/Tr√≠ceps", "Extensora"],
        "B": ["Terra/Stiff", "Remada Curvada", "Puxada Alta", "Face Pull", "Rosca Direta"],
        "C": ["Leg Press 45", "Supino M√°quina", "B√∫lgaro Smith", "Elev. Lateral", "Remada M√°q"]
      };

      let faseAtual = "hiper";

      function nav(id) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.currentTarget.classList.add('active');
        if(id === 'relatorio') initChart();
      }

      function renderTreino() {
        const container = document.getElementById('workout-container');
        container.innerHTML = "";
        // Exemplo carregando Treino A
        treinosABC["A"].forEach((ex, idx) => {
          container.innerHTML += `
            <div class="card">
              <span class="ex-title">${ex}</span>
              <div class="series-row" style="font-size:9px; color:var(--gray); font-weight:bold; text-align:center;">
                <div>SET</div><div>KG</div><div>REPS</div><div>RPE</div>
              </div>
              ${[1,2,3,4].map(s => `
                <div class="series-row">
                  <div style="font-weight:bold; text-align:center;">${s}</div>
                  <div class="input-group"><span>KG</span><input type="number" class="kg-${idx}" oninput="calc('${idx}')"></div>
                  <div class="input-group"><span>REP</span><input type="number"></div>
                  <div class="input-group"><span>RPE</span><input type="number" class="rpe-${idx}" oninput="calc('${idx}')"></div>
                </div>
              `).join('')}
            </div>
          `;
        });
      }

      function calc(idx) {
        const kgs = document.getElementsByClassName(`kg-${idx}`);
        const rpes = document.getElementsByClassName(`rpe-${idx}`);
        const badge = document.getElementById('predict-box');
        
        let vKg = 0; let vRpe = 0;
        for(let i=0; i<kgs.length; i++) {
          if(kgs[i].value > 0) { vKg = parseFloat(kgs[i].value); vRpe = parseInt(rpes[i].value); }
        }

        if(vKg > 0 && vRpe > 0) {
          badge.style.display = "block";
          let sugestao = vRpe <= 7 ? (vKg * 1.05).toFixed(1) : (vRpe <= 9 ? (vKg * 1.02).toFixed(1) : vKg);
          badge.innerHTML = `üéØ <strong>ALVO:</strong> Pr√≥xima carga sugerida para este exerc√≠cio: <strong>${sugestao} KG</strong>`;
        }
      }

      function mudarFase() {
        faseAtual = document.getElementById('selectFase').value;
        document.getElementById('faseAtiva').innerText = faseAtual.toUpperCase();
        alert("Periodiza√ß√£o alterada para " + faseAtual);
      }

      function initChart() {
        const ctx = document.getElementById('mainChart').getContext('2d');
        new Chart(ctx, {
          type: 'line',
          data: {
            labels: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex'],
            datasets: [{ label: 'Volume', data: [4200, 0, 4800, 0, 5100], borderColor: '#3b5bdb', tension: 0.4 }]
          },
          options: { plugins: { legend: { display: false } } }
        });
      }

      function salvarSessao() { alert("Treino salvo com sucesso!"); }

      renderTreino();
    </script>
  </body>
</html>
