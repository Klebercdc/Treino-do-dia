<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
    <meta name="theme-color" content="#0b1220" />
    <title>TITAN LOG PRO - Full System</title>
    <link rel="stylesheet" href="./styles.css" />
    <style>
      :root { --bg: #0b1220; --card: #161e2e; --blue: #3182ce; --text: #f7fafc; }
      body { background: var(--bg); color: var(--text); font-family: -apple-system, sans-serif; margin: 0; }
      
      /* Header & Pills */
      .topbar { padding: 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #2d3748; }
      .nav-pills { display: flex; gap: 8px; padding: 10px; background: var(--bg); position: sticky; top: 0; z-index: 10; border-bottom: 1px solid #2d3748; }
      .pill { flex: 1; text-align: center; padding: 12px; border-radius: 8px; background: #1a202c; font-weight: bold; font-size: 0.8rem; border: 1px solid #2d3748; cursor: pointer; }
      .pill.active { background: var(--blue); border-color: var(--blue); color: white; }

      /* Cards & Grid */
      .exercise-card { background: var(--card); border-radius: 12px; padding: 15px; margin: 10px; border: 1px solid #2d3748; }
      .ex-title { font-weight: 800; font-size: 1.1rem; color: var(--blue); margin-bottom: 2px; }
      .ex-meta { font-size: 0.75rem; color: #a0aec0; margin-bottom: 5px; text-transform: uppercase; }
      .ex-obs { font-size: 0.75rem; color: #f6ad55; font-style: italic; margin-bottom: 12px; display: block; }
      
      .series-header { display: grid; grid-template-columns: 35px 1fr 1fr 1fr; gap: 8px; margin-bottom: 5px; text-align: center; }
      .series-header span { font-size: 0.65rem; color: #718096; font-weight: bold; }
      .series-row { display: grid; grid-template-columns: 35px 1fr 1fr 1fr; gap: 8px; align-items: center; margin-bottom: 8px; }
      .s-label { font-weight: bold; color: #718096; font-size: 0.85rem; text-align: center; }
      
      .input-box { background: #0b1220; border: 1px solid #2d3748; border-radius: 6px; padding: 6px 0; }
      .input-box input { background: transparent; border: none; color: #fff; width: 100%; text-align: center; font-size: 1rem; outline: none; font-weight: bold; }

      .section { display: none; }
      .section.active { display: block; }
      
      .footer-row { display: flex; justify-content: space-between; align-items: center; padding: 20px 10px; gap: 10px; }
      .btn { padding: 12px 20px; border-radius: 8px; border: none; font-weight: bold; cursor: pointer; flex: 1; text-align: center; }
      .btn.primary { background: #38b2ac; color: #fff; }
      .btn.secondary { background: #2d3748; color: #fff; }
    </style>
  </head>
  <body>
    <header class="topbar">
      <div class="titlewrap">
        <h1>Treino do Dia</h1>
        <div class="sub" id="todayLabel">Carregando...</div>
      </div>
      <div class="actions">
        <button class="btn secondary mini" id="btnHistory">Histórico</button>
        <button class="iconbtn" id="btnSettings">⚙️</button>
      </div>
    </header>

    <div class="nav-pills">
      <div class="pill active" onclick="tab('A', this)">TREINO A</div>
      <div class="pill" onclick="tab('B', this)">TREINO B</div>
      <div class="pill" onclick="tab('C', this)">TREINO C</div>
    </div>

    <main class="container">
      <div id="A" class="section active"></div>
      <div id="B" class="section"></div>
      <div id="C" class="section"></div>

      <div class="footer-row">
        <button id="btnExport" class="btn secondary">JSON</button>
        <button id="btnCopy" class="btn secondary">Copiar</button>
        <button id="btnSave" class="btn primary">Salvar hoje</button>
      </div>
    </main>

    <dialog class="modal" id="modalHistory">
      <div class="modalhead"><h3>Histórico</h3><button class="iconbtn" id="closeHistory">×</button></div>
      <div class="grid">
        <select id="histExercise" style="width:100%"></select>
        <div class="row" style="margin-top:10px; display:flex; gap:5px;">
          <button class="btn secondary" id="btnImport">Importar</button>
          <button class="btn danger" id="btnClear">Limpar</button>
        </div>
      </div>
      <div class="divider"></div>
      <div class="hist" id="histList"></div>
    </dialog>

    <dialog class="modal" id="modalSettings">
      <div class="modalhead"><h3>Configurações</h3><button class="iconbtn" id="closeSettings">×</button></div>
      <div class="grid">
        <label class="field"><span>Guardar RPE?</span><select id="keepRpe"><option value="1">Sim</option><option value="0">Não</option></select></label>
      </div>
      <button class="btn primary" id="btnSaveSettings" style="margin-top:20px; width:100%">Salvar</button>
    </dialog>

    <input type="file" id="fileImport" accept="application/json" hidden />

    <script>
      // 1. Definição dos Dados com Metas de RPE
      const data = {
        A: [
          { n: "1. Agachamento / Leg 45", m: "4 Séries | 90s", o: "Meta: RPE 8-9 (Ficar a 1-2 da falha)", s: 4 },
          { n: "2. Supino Inclinado", m: "4 Séries | 90s", o: "Meta: RPE 9 (Foco na progressão)", s: 4 },
          { n: "3. Desenv. Militar", m: "3 Séries | 60s", o: "Meta: RPE 8 (Preservar ombro)", s: 3 },
          { n: "4. Fundos / Testa", m: "3 Séries | 60s", o: "Meta: RPE 9-10 (Falha técnica)", s: 3 },
          { n: "5. Cadeira Extensora", m: "3 Séries | 45s", o: "Meta: RPE 10 (Queima total)", s: 3 }
        ],
        B: [
          { n: "1. Terra ou Stiff", m: "4 Séries | 90s", o: "Meta: RPE 7-8 (Cuidado com lombar)", s: 4 },
          { n: "2. Remada Curvada", m: "4 Séries | 90s", o: "Meta: RPE 9 (Esmagar dorsal)", s: 4 },
          { n: "3. Puxada Alta (Frente)", m: "3 Séries | 60s", o: "Meta: RPE 9", s: 3 },
          { n: "4. Face Pull", m: "3 Séries | 45s", o: "Meta: RPE 10 (Volume alto)", s: 3 },
          { n: "5. Rosca Direta", m: "3 Séries | 60s", o: "Meta: RPE 9", s: 3 }
        ],
        C: [
          { n: "1A. Leg Press Horiz.", m: "3 Séries | Superset", o: "Meta: RPE 9", s: 3 },
          { n: "1B. Flexão de Braços", m: "3 Séries | Máximo", o: "Meta: RPE 10 (Falha)", s: 3 },
          { n: "2A. Afundo / Passada", m: "3 Séries | Constante", o: "Meta: RPE 8", s: 3 },
          { n: "2B. Elevação Lateral", m: "3 Séries | 15 Reps", o: "Meta: RPE 10", s: 3 },
          { n: "3A. Remada Máquina", m: "3 Séries | Foco Dorsal", o: "Meta: RPE 9", s: 3 },
          { n: "3B. Tríceps Corda", m: "3 Séries | 15 Reps", o: "Meta: RPE 10", s: 3 },
          { n: "4. Cadeira Flexora", m: "4 Séries | 45s", o: "Meta: RPE 9", s: 4 }
        ]
      };

      // 2. Lógica de Interface
      function tab(t, el) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
        document.getElementById(t).classList.add('active');
        el.classList.add('active');
      }

      function build() {
        ['A', 'B', 'C'].forEach(id => {
          const container = document.getElementById(id);
          data[id].forEach(ex => {
            let html = `
              <div class="exercise-card">
                <div class="ex-title">${ex.n}</div>
                <div class="ex-meta">${ex.m}</div>
                <div class="ex-obs">${ex.o}</div>
                <div class="series-header">
                  <span>SÉRIE</span><span>KG</span><span>REPS</span><span>RPE</span>
                </div>`;
            for (let i = 1; i <= ex.s; i++) {
              html += `
                <div class="series-row">
                  <div class="s-label">S${i}</div>
                  <div class="input-box"><input type="number" inputmode="decimal" placeholder="-"></div>
                  <div class="input-box"><input type="number" inputmode="numeric" placeholder="-"></div>
                  <div class="input-box"><input type="number" inputmode="numeric" placeholder="10"></div>
                </div>`;
            }
            html += `</div>`;
            container.innerHTML += html;
          });
        });
        
        // Data de hoje
        const agora = new Date();
        document.getElementById('todayLabel').innerText = agora.toLocaleDateString('pt-BR', { weekday: 'long', day: 'numeric', month: 'long' });
      }

      build();
    </script>
    <script src="./app.js"></script>
  </body>
</html>
